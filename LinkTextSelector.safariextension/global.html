<!DOCTYPE html>
<html><body><script type="text/javascript">

// Response Settings to JS
safari.application.addEventListener("message", function(Event) {
    if (Event.name == "askForHotKey") {
        var hotKey = safari.extension.settings.getItem("hotKey")
        safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("answerForHotKey", hotKey);
    }
},false)

safari.extension.settings.addEventListener("change", function(Event){
    if (Event.key == "hotKey") {
        var newKey = Event.newValue
        safari.application.activeBrowserWindow.activeTab.page.dispatchMessage("changedForHotKey", newKey);
    }
}, false)

</script></body></html>